# 智能Mock系统用户使用文档

## 1. 使用前准备

1. 启动后端服务
2. 访问前端页面：

```
http://localhost:8080/h5-test.html
```

## 2. 接口文档上传

1. 进入【接口文档】模块
2. 在“上传接口”中确认接口地址
3. 选择 Word / PDF 文档
4. 点击【生成Mock】
5. 等待解析完成

## 3. 查看接口与 Mock 地址

1. 进入【接口管理】模块
2. 查看接口列表
3. 复制 Mock 地址或点击【试试/使用】

## 4. 在线调试

1. 进入【在线调试】模块
2. 粘贴 Mock 地址
3. 输入请求 JSON
4. 点击【发送请求】
5. 查看响应结果

## 5. 脚本响应模式

除默认的「模板」响应外，可为接口选择**脚本**响应模式，用 JavaScript 根据请求动态生成响应：

1. 在【接口管理】中点击某接口的【编辑配置】。
2. 将「响应模式」选为 **脚本**，在「响应脚本」中填写 JavaScript。
3. 脚本中可访问 `request.headers`、`request.query`、`request.body`，需返回 `{ headers: {}, body: {} }`。
4. 保存后，该接口的 Mock 请求将每次执行脚本得到响应（不缓存）。

示例脚本：

```javascript
var body = request.body || {};
var name = body.name || "guest";
return { headers: { "Content-Type": "application/json" }, body: { message: "Hello, " + name } };
```

说明：脚本执行超时 5 秒，异常或超时时会回退到响应示例。仅建议在可信环境使用脚本模式。

## 6. 错误响应 Mock

在请求 JSON 中加入以下字段即可触发错误响应：

```json
{
  "__mock_error": true,
  "__mock_error_code": "E001",
  "__mock_error_message": "Invalid MSISDN"
}
```

## 7. 请求日志与统计

进入【请求日志】模块可查看：

- 上传与生成操作日志
- Mock 命中/生成/错误统计
- 按接口维度的调用次数

## 8. 常见问题

### Q1. 上传失败提示文件过大

检查后端配置中的上传大小限制。

### Q2. 校验失败提示缺少必填字段

检查请求 JSON 是否包含必填字段，必要时复制系统提供的请求示例。

### Q3. Mock 地址访问失败

确认服务已启动，并使用 POST 调用。

